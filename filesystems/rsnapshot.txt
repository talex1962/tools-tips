RSNAPSHOT & RSYNC FOR SNAPSHOTTING AND MIRRORING
------------------------------------------------

1. Install rsnapshot

    sudo apt-get install rsnapshot

2. Edit the /etc/rsnapshot.conf file

    -- configure paths
    -- configure backup rotation and hierarchy
        -- example: hourly, daily, weekly
    -- configure LVM parameters if required
    -- see current /etc/rsnapshot.conf file

3. Create the snapshot target space

    -- probably a separate volume

4. Edit crontab and add the various levels of rsnapshot commands

    -- NOTE: hourly, daily and weekly snapshots must be entered into
        crontab separately
    /usr/bin/rsnapshot hourly
    /usr/bin/rsnapshot daily

5. To run rsnapshot manually and create the snapshots:

    sudo /usr/bin/rsnapshot hourly
    sudo /usr/bin/rsnapshot daily
    sudo /usr/bin/rsnapshot weekly

    NOTE: takes about 3 minutes to snapshot about 2.7 GB this way.
    Subsequent snapshots with few changes take under a minute.

6. To mirror a snapshot (e.g., daily.0) to the cloud server:

    sudo rsync --delete -azhe 'ssh -q -y -i /root/.ssh/id_rsa' /srv/storage/backup/snapshot/daily.0/drive-backup/srv/storage/drive ubuntu@cloud-server:/srv/storage/drivebak/data

        where the volume holding the mirror is mounted on /srv/storage/drivebak and
        ./data is the target directory into which the mirror is created

    NOTE: takes about 5.5 minutes to mirror 2.7 GB this way over a GigE link;
        subsequent invocations of rsync on unchanged data take a few seconds.

7. To snapshot the mirror on the remote cloud server, follow steps
    1, 2, 3, 4 for the cloud server
